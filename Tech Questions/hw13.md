# HW13
## Questions:

### 1. List all of the annotations you learned from class and homework to annotations.md (your own cheatsheet).
Check annotations.md

### 2. Explain TLS, PKI, certificate, public key,private key,and signature.

TLS (Transport Layer Security) is a protocol that provides secure communication over a network, it provides confidentiality, data integrity and authentication, such as between a web browser and a server.
TLS Handshake:
The browser retrieves the server’s certificate and validates it against the Certificate Authority (CA)’s signature.
The browser encrypts a session key using the server’s public key.
The server decrypts the session key using its private key.

PKI (Public Key Infrastructure): A framework to create and validate certificates and public/private key pairs.
The CA ensures the authenticity of the certificate via PKI.

Certificate: A digital document that binds an entity’s identity to its public key.
A website has a digital certificate issued by a trusted Certificate Authority(CA), containing its public key.

Public Key: a key pair with encrypt data, is shared openly and used for encryption and verification. Only private key can decrypt it.
Private Key: The counterpart to the public key, it is known only to its owner.

The server has a private key, and its public key (shared by server) is part of the certificate during TLS handshake.


Signature: a mechanism used to verify the authenticity of data.
During the TLS handshake, digital signatures are used to verify the certificate and ensure data integrity.

### 3. Write a Spring security based application

### 4. List all HTTP status codes related to authentication and authorization failures.

401: Unauthorized: Authentication is required but has failed or not yet been provided.
403: Forbidden: The request was valid, but the server is refusing to fulfill it due to lack of permissions.
404: Not Found: Sometimes occurs when the requested resource doesn't exist due to authorization failures.
419: Session Expired: Commonly used to indicate that a user's session is no longer valid.
429: Too Many Requests: Often triggered when authentication attempts exceed the rate limit.


### 5. Compare **authentication** and **authorization**. Name and explain important components in Spring Security that undertake **authentication** and **authorization**.
Authentication: Verifies the user’s identity (e.g., username/password).
Authorization: Determines what actions/resources the user is allowed to access.

In Spring, 
`AuthenticationManager` is responsible for authenticating the user. Uses configured `AuthenticationProviders`( DAO Authentication, LDAP Authentication, casAuthentication). With authenticate() and support() methods.
`SecurityContext`: Holds authentication details
`Authentication Filter`: `UsernamePasswordAuthenticationFilter` and `JwtAuthenticationFilter` to username/password login and JWT token.

`AccessDecisionManager`: Handles authorization by deciding if the authenticated user has the required permissions.
@PreAuthorize and @PostAuthorize: Fine-grained method-level access control.

### 6. Explain HTTP Session
A session is a server-side mechanism used to store user-specific information (e.g., login state) across multiple requests with a unique `Session ID`.
It can used to maintain user authentication status, shopping cart items, or user preferences.

### 7. Explain Cookie
A piece of data stored on the client side and sent back to the server with every request.
Persistent login credentials (e.g., "Remember Me" functionality). Tracking user behavior (e.g., analytics).

### 8. Compare Session and Cookie
Session: Stored on the server. Typically, it expires when the user logs out or closes the browser. Tracking user authentication.


Cookie: Stored on the client’s browser. Configurable expiry time. Remembering user preferences.

### 9. Find at least TWO websites that can be logged in using your Google Account. Explain how Google SSO works with screenshots and SSO-related REST calls in Chrome Developer Tool.
Youtube: accounts.google.com
:method:
GET
:path: /ServiceLogin?continue=https%3A%2F%2Fwww.youtube.com%2F&hl=en&authuser=0&passive=true&sarp=1&aodrpl=1&checkedDomains=youtube&checkConnection=youtube%3A198&pstMsg=1
Returns an access token and a refresh token.


Udemy:
Request URL:
https://accounts.google.com/o/oauth2/v2/auth?gsiwebsdk=3&client_id=700206021005-as1l679sch207mp70msgjhma1krf3k9q.apps.googleusercontent.com&scope=email+profile&redirect_uri=storagerelay%3A%2F%2Fhttps%2Fwww.udemy.com%3Fid%3Dauth475249&prompt=consent&access_type=offline&response_type=code&include_granted_scopes=true&enable_granular_consent=true&service=lso&o2v=2&ddm=1&flowName=GeneralOAuthFlow
Request Method: GET
User Redirected to Google -> User Login/Consent (email/profile) -> Authorization Code Response (via redirect_uri), then uses the authorization code to request an access token and a refresh token from Google’s token endpoint.

### 10. How do we use session and cookie to keep user information across the application?
Session: Stores user-specific data on the server (e.g., login state). The client sends a session ID (stored in a cookie) with every request to identify the user.

Cookie: Store data on client's browser. Sent automatically with every request to the server. e.g Persistent login or saving user preferences.

### 11. What is the Spring Security filter?
It's Aa set of predefined filters in the Spring Security framework that handle authentication and authorization. e.g username/password login, jwt, security exceptions.

### 12. Explain bearer token and how JWT works.
Bearer Token: A token included in the Authorization header of HTTP requests to access protected resources.

JWT JSON Web token: is an open standard for securely sharing JSON data between parties. JWT is received from the server and sent with every subsequent request to the server. The server validates the token and grants access.
JWT Components:
1. Header: Specifies the token type and signing algorithm.
2. Payload: Contains claims (e.g., user ID, roles).
3. Signature: Ensures the token's integrity and authenticity.

### 13. Explain how we store sensitive user information such as passwords and credit card numbers in a database.
1. Hashing: Use algorithms like bcrypt or Argon2 for storing passwords. Hashing is one-way, making it irreversible.
2. Encryption: Use strong encryption (e.g., AES) for sensitive data like credit card numbers. Requires a secure key for decryption.
3. Secure Connections: Use HTTPS/TLS for secure data transfer.
4. Access Control: Limit access to sensitive data to authorized users only.


### 14. Compare UserDetailsService, AuthenticationProvider, AuthenticationManager, AuthenticationFilter.
UserDetailsService:	Retrieves user information (e.g., username, roles) from the database for authentication.
AuthenticationProvider:	Validates the authentication request (e.g., username/password or token).
AuthenticationManager: Delegates authentication requests to one or more AuthenticationProvider instances.
AuthenticationFilter: Intercepts HTTP requests to authenticate users (e.g., processes login requests).

### 15. What is the disadvantage of Session? How to overcome the disadvantage?
Sessions consume server memory, which may cause scalability issues. And session data may be lost if the server restarts.

Solution: 
1. Use distributed session stores (e.g: Redis) to share session data across servers.
2. Use stateless authentication methods (e.g: JWT) to reduce server-side storage.

### 16. How to get a value from application.properties in Spring Security?
Use @Value or @ConfigurationProperties
example:
```
@Value("${spring.datasource.url}")
private String databaseUrl;
```

### 17. What is the role of configure(HttpSecurity http) and configure(AuthenticationManagerBuilder auth)?
configure(HttpSecurity http): Configures HTTP-level security like URL access restrictions (admin) and Login/logout endpoints

configure(AuthenticationManagerBuilder auth): Configures authentication providers, like In-memory authentication or Database authentication

### 18. 

- What do you mean by basic authentication?
For basic authentication, we send a username and password using the HTTP [Authorization] header to enable us to access the resource. Usernames and passwords are encoded using base64 encoding (not encryption) in Basic Authentication. The encoding is not secure since it can be easily decoded.   

- What are some essential features of Spring Security?
1. Supports authentication and authorization in a flexible and comprehensive manner.
2. Detection and prevention of attacks including session fixation, clickjacking, cross-site request forgery, etc.
3. Integrate with Servlet API.
4. Offers optional integration with Spring Web MVC (Model-View-Controller).
5. Java Authentication and Authorization Service (JAAS) is used for authentication purposes.
6. Allows Single Sign-On so that users can access multiple applications with just one account (username and password).

- Explain salting and its usage
  Salting is the process of combining random data with a password before password hashing.  Salt improves hashing by increasing its uniqueness and complexity without increasing the requirements for users.

- Explain spring security OAuth2
  OAuth 2.0, permits client applications to access protected resources via an authorization server. Using it, a client application (third party) can gain limited access to an HTTP service on behalf of the resource owner or on its own behalf.
1. Resource Owner/User: The owner of a resource, i.e., the individual who holds the rights to that resource.
2. Client: The application requests an access token (represents a user's permission for the client to access their data/resources), then accesses the protected resource server after receiving the access token.
3. Authorization Server: After successfully authenticating the resource owner and obtaining authorization, the server issues access tokens to the client.
4. Resource Server: It provides access to requested resources. Initially, it validates the access tokens, then it provides authorization.